<!DOCTYPE html>
<html lang="en">

<head>
    <title>Tax forms: Bar chart with bars</title>
    <meta charset="UTF-8">
    <script src="taxForms.js"></script>
</head>

<body>

    <canvas id="chart" width="1150" height="850"></canvas>

    <script>
        const canvas = document.getElementById('chart');
        const context = canvas.getContext('2d');

        /* Draw a line from (fromX, fromY) to (toX, toY) */
        function drawLine(fromX, fromY, toX, toY) {
            context.beginPath();
            context.moveTo(toX, toY);
            context.lineTo(fromX, fromY);
            context.stroke();
        }

        /* Draw a text (string) on (x, y) */
        function drawText(text, x, y) {
            context.fillStyle = 'black';
            context.fillText(text, x, y);
        }

        /* Draw a text and with a line to its right */
        function drawLineWithText(text, fromX, fromY, toX, toY) {
            drawText(text, fromX - 50, fromY + 10);
            drawLine(fromX, fromY, toX, toY);
        }

        /* Insert your code here. */
        context.font = "30px serif"
        //creating the lines
        for (let i = 0; i <= 10; i++) {
            context.fillStyle = "black";
            //the text shown, i*100000 to show correct intervals
            context.fillText((1000000 - i * 100000), 50, 50 + (i * 75))
            //draw the line
            context.beginPath();
            context.moveTo(165, 40 + (i * 75));
            context.lineTo(1000, 40 + (i * 75));
            context.stroke();
            context.closePath();
        }

        //position the box at a position
        function createBox(x, y, color, sizeX, sizeY) {
            n = 1000 / 750
            context.beginPath();
            context.moveTo(x, y);
            context.fillStyle = color;
            context.fillRect(x, y, n * sizeX, n * sizeY);
            context.closePath();
        }

        //position the text at a position
        function createText(x, y, text) {
            context.beginPath();
            context.moveTo(x, y);
            context.fillStyle = "black";
            context.fillText(text, x, y, 100, 100);
            context.closePath();
        }

        //initialize the boxes and the text
        createBox(1010, 40, "red", 30, 20);
        createBox(1010, 90, "blue", 30, 20);
        createText(1055, 65, "Income");
        createText(1055, 115, "Wealth");

        // Part 4
        //calculate the income and wealth of each hero and draw them on the table
        for (let i = 0; i <= taxForms.length - 1; i++) {
            let income = taxForms[i].income
            let wealth = taxForms[i].wealth
            console.log(income)
            createBox(i * 200 + 165, 790, "red", 50, (-income / 2350 * n))
            createBox(i * 200 + 232, 790, "blue", 50, (-wealth / 2350 * n))
            console.log(wealth)
        }

    </script>
</body>

</html>
